{% extends "base-old.html" %}

{% block page_title %}{{ _('Group Listing') }}{% endblock %}
{% block body_id %}group-index{% endblock %}

{% block content %}
  {% if groups %}
    <h1>{{ _('Group Listing') }}</h1>

    <div class="sort">
      <form method="get" action="{{ request.path }}">
          <input type="hidden" name="page" value="{{ page }}" />
          <label for="sort">Sort by:</label>
          <select name="sort">
              {% for key, value in sort_choices.items() %}
              <option value="{{ key }}"
                      {% if sort_by == key %}
                      selected="selected"
                      {% endif %}
                      >{{ value }}</option>
              {% endfor %}
          </select>
          <input type="submit" value="Sort" />
      </form>
    </div>
  
    <p>
      {% trans %}
        Mozillians work on all sorts of different things! From Add-on
        developers to localizers, find Mozillians who work on similar things
        using user-created groups.
      {% endtrans %}
    </p>

    <div id="groups">
      {% for group_item in groups|sort|slice(3) -%}
        <ul class="group-list">
          {% for group in group_item %}
            <li class="group-item">
              <a href="{{ url('group', group.url) }}" class="group-name btn">
                {{ group.name|truncate(20, True) }} &mdash;
                <i class="icon-user-md"></i>
                {{ group.members.vouched().count() }}
              </a>
            </li>
          {% endfor %} 
        </ul>
      {% endfor %}
    </div>

    <div class="pagination">
      <ul>
        {% if groups.has_previous() %}
          <li>
            <a href="?page={{ groups.previous_page_number() }}">
            {{ _('Back') }}
            </a>
          </li>
        {% endif %}

        <li>{{ groups.number }} / {{ groups.paginator.num_pages }}</li>

        {% if groups.has_next() %}
          <li>
            <a href="?page={{ groups.next_page_number() }}">
              {{ _('Next') }}
            </a>
          </li>
        {% endif %}
      </ul>
    </div>
  {% endif %}
{% endblock content %}
