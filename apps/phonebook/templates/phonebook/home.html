{% extends "base.html" %}

{% block page_title %}{{ _('Mozilla Community Directory') }}{% endblock %}
{% block body_id %}home{% endblock %}
{% block body_classes %}box-content search-page{% endblock %}

{% set nav_home = 'active' %}
{% block nav %}
  {{ super() }}
{% endblock %}


{% block main_content %}
  {% if not user.is_authenticated() %}
    <div class="welcome">
      <noscript>{{ _('This website requires JavaScript to be turned on.') }}</noscript>
      {% trans %}
        <h1>Welcome<br> <small>to the Mozilla community directory.</small></h1>
      {% endtrans %}

      <p>
        {% trans about=url('about') %}
          If you're looking for information on your fellow contributors, what they
          do and how to connect with them, you've come to right place.
          <a href="{{ about }}">Learn more</a>
        {% endtrans %}
      </p>

      <p>
        <button id="create_profile" class="browser_id_login">
          <span class="id">
            <span class="bid">{{ _('ID') }}</span><span class="arrow"></span>
          </span>
          <span class="signin">{{ _('Sign In with BrowserID') }}</span>
        </button>
        <br>
        <a href="http://identity.mozilla.com/post/12950196039/deploying-browserid-at-mozilla">
          {{ _('What is BrowserID? Why are we using it?') }}
        </a>
      </p>
    </div>
  {% elif user.get_profile().is_vouched %}
    <h1>Welcome to Mozillians!</h1>
    {% if groups %}
      <h3>Stewards in your Functional Area</h3>
      <div class="row">
        {% for my_group in groups %}
          {{ search_result(my_group.steward) }}
        {% endfor %}
      </div>
    {% endif %}
    <div class="popular-groups">
      <h3>Browse Functional Areas</h3>
      <ul id="groups" class="tagit ui-widget ui-corner-all">
        {% for group in curated_groups %}
          <li class="tagit-choice ui-widget-content ui-state-default
                     ui-corner-all p-category category">
            <a href="{{ url('group', group.id, group.url) }}">
              {{ group.name }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
    <div id="home-options">
      <ul class="well">
        <h3>Options</h3>
        <li>
          <a href="{{ url('invite') }}" class="btn">Invite a Mozillian</a>
          {{ _('Invite other contributors to create a profile') }}
        </li>
        <li>
          <a href="{{ url('profile.edit') }}" class="btn btn-primary">Edit your Profile</a>
          {{ _('Edit your profile, account settings or view developer info') }}
        </li>
        <li>
          <a href="{{ url('group_index') }}" class="btn btn-info">View Groups</a>
          {{ _('View all groups in the Phonebook') }}
        </li>
        <li>
          <a href="{{ url('about') }}" class="btn btn-info">Read the About Page</a>
          {{ _('Learn more about the Phonebook and why its built') }}
        </li>
      </ul>
    </div>
  {% elif not user.get_profile().is_vouched %}
    {% trans profile=url('profile', user.username) %}
      <h1> Welcome </h1>
      Your Non-Vouched account has been created!
      <a href="http://mozilla.org/contribute">Get involved</a> to
      <a href="{{ profile }}">get vouched.</a> Below is info that can help you get involved in
      your selected groups.
    {% endtrans %}
    <div class="row">
      {% for group in groups %}
        <div class="span6" id="home-group">
          <h2>{{ group.name }}</h2>
	  <dl>
            <dt>{{ _('Steward') }}</dt>
            <dd>{{ group.steward.display_name }}</dd>
            {% if group.website %}
              <dt>{{ _('Website') }}</dt>
              <dd>{{ group.website|urlize }}</dd>
            {% endif %}
            {% if group.wiki %}
              <dt>{{ _('Wiki') }}</dt>
              <dd> {{ group.wiki|urlize }}</dd>
            {% endif %}
            {% if group.irc_channel %}
              <dt>{{ _('IRC') }}</dt>
              <dd>{{ group.irc_channel }}</dd>
            {% endif %}
          </dl>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endblock main_content %}
